@model OnlineConsulting.Models.ViewModels.Chat.ConsultantChatViewModel;

<div class="chat-container">

    <div id="chat-content" class="chat-content">
        <ul id="chat-messages-list" class="chat-messages-list"></ul>
        <div class="chat-form">
            <textarea maxlength="1000"
                      type="text"
                      id="chat-message-input"
                      class="chat-form__input"></textarea>
            <button id="chat-send-button" class="chat-form__button">
                <i class="fas fa-play fa-lg text-warning"></i>
            </button>
        </div>
    </div>

    <div>
        <button 
                class="btn btn-light w-100" 
                type="button" 
                id="collapseSideBarBtn" 
                data-toggle="collapse" 
                data-target="#collapseSideBar" 
                aria-expanded="false" 
                aria-controls="collapseSideBar">
            Details
        </button>
        <div class=" bg-dark shadow-dark p-3 collapse chat-sidebar" id="collapseSideBar">
            <a class="d-block mb-5 mt-3 text-light"
               asp-controller="Chat"
               asp-action="@Model.RedirectAction">
                <i class="fas fa-chevron-left text-warning"></i>
                Back to list
            </a>
            <p class="d-flex flex-column align-items-start">
                <span class="font-weight-bold text-warning">Host:</span>
                <span class="text-truncate w-100 text-light"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="@Model.Host">
                    @Model.Host
                </span>
            </p>
            <p class="d-flex flex-column align-items-start">
                <span class="font-weight-bold text-warning">Path:</span>
                <span class="text-truncate w-100 text-light"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="@Model.Path">
                    @Model.Path
                </span>
            </p>
            <form method="post" asp-controller="Chat" asp-action="ChangeConversationStatus">
                @{
                    var conversationId = Model.ConversationId;
                }
                <input type="hidden" asp-for=@conversationId />
                <input type="hidden" name="redirectAction" value="@Model.RedirectAction" />
                <button class="btn btn-danger mt-5">Close conversation</button>
            </form>
        </div>
    </div>

</div>

@section Styles{
    <link rel="stylesheet" href="~/css/consultantChat.css">
}

@section Scripts {
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <partial name="/Views/Shared/Scripts/_UtcToLocal.cshtml" />
    <script>const conversationId = "@Model.ConversationId"</script>
    <script type="module" src="~/js/consultantChat.js"></script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })</script>
}